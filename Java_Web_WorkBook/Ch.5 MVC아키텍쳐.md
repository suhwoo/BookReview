# 5장 MVC 아키텍쳐  
## 5.1 MVC 이해하기  
기존의 웹프로그래밍 방식은 올인원방식, 클라이언트요청을 서블릿 혼자서 처리하는 방식이다.  
원래 서블릿이 했던 일은 요철 파라미터를 가공하고 비지니스 로직 및 데이터를 가공하고 결과 데이터를 생성한다.  
  
MVC아키텍쳐는 서블릿이 담당하던 일을 모델과 뷰가 나누어서 처리한다.  
서블릿으로부터 모델은 호풀을 받고 결과를 서블릿에 다시 return한다. 그러면 서블릿은 뷰에 화면 생성을 요청하고 뷰는 결과화면을 서블릿에서 return한다.  
즉, 서블릿은 클라이언트 요청을 받아서 어느 모델, 어느 뷰에 던질지 결정하는 흐름 제어를 당담한다.  
모델은 비지니스 로직 및 데이터를 처리하고 뷰는 겨로가로 화면을 생성한다.  
  
**등장배경**  
세계화가 되면서 글로벌 경쟁이 가속된다. -> 제품 생명주기를 단축 (계속 새로운 걸 내야하니까) -> 조직과 업무가 계쏙 바뀜 -> 프로그램도 자주 바뀜. ->기능추가나 변경이 쉬워야 함 -> MVC 아키텍쳐  
  
**MVC 아키텍쳐의 특징**  
역할을 나누고 의존성을 최소화한다.->변경이 쉽고 기존 코드 재사용성을 높인다.  
**MVC 흐름**  
![image](https://user-images.githubusercontent.com/61738600/127312467-82c3cc61-ea78-4c9c-bd05-914b09409db1.png)  
흐름은 다음과 같다.  
다음의 그림에서 값 객체라는 곳에 모델객체가 생성한 결과값을 담는다. 담고 서블릿에 return하게 된다.  
그럼 뷰가 값 객체를 참고해서 결과화면을 만든다.  
## 5.2 뷰 컴포넌트와 JSP  
뷰 컴포넌트는 JSP로 만든다 -> 왜? -> 화면 만들기가 쉽다!  
원래였으면 java 내에서 
```java
out.println("<html><head><title>회원등록</title></head></html>");
```
이런식으로 일일히 출력해야 했다.  
JSP를 이용하면 그대로 출력할 내용을 작성하면 된다.  
  
그렇다면 JSP가 어떻게 서블릿이 될까?  
Hello.jsp가 JSP엔진을 통해 <Java Source>인 Hello_jsp.java가 되고 자바컴파일러가 이걸 컴파일해서 Hello_jsp.class로 만들어 웹 브라우저에 리턴한다.  
Servlet에서 상속받은 JspPage인터페이스에 HttpJspPage 인터페이스가 있고 이걸 상속받는다.  
또한 GenericSerlvet의 HttpServlet추상 클래스도 상속받는다.  
결국 JSP가 생성한 클래스는 servlet이다.  
  
## 5.3 JSP의 주요 구성요소  

  1. 템플릿 데이터  
  Servlet class를 만드는데 탬플릿으로 쓰인다.  
  타이밍한것들이 out.write();로 생성된다.  
  예를 들어
  ```jsp
  <h2>계산기</h2>
  ```
  는 
  ```java
  out.write("<h2>계산기</h2>\n");
  ```
  으로 생성된다.  
  2. JSP 지시자  
```jsp
  <%@page
          language = "java"//JSP페이지에서 사용할 언어.
          contentType="text/html;charset=UTF-8"//다음의 자바 코드를 생성. response.setContentType("text/html;charset=UTF-8");
          import="java.util.*,java.io.*"//JSP페이지에서 사용할 자바 패키지 임포트 코드를 생성. import java.util.*;
          %>
```
3. 스크립트릿  
<%...%> 다음과 같은 곳에 java코드가 들어가 있으면 서블릿 클래스에 _jspService()안에 그대로 복사된다.  
4. JSP선언문  
<%!...%> 안에 클래스 선언부에 들어갈 변수나 메소드 선언.  
즉, for문이나 if문을 바로 넣을 수 없음.  
5. JSP 표현식  
<%=...%> out.print()를 생성한다. out.write("v1") 이렇게 들어가는게 아니라 out.print(v1) 이렇게 그대로 들어간다.  

🔑무엇이 어떻게 변환되는지를 알아야함!  
  
## 5.4 서블릿에서 뷰 분리하기  


  
  




